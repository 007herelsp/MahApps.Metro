<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="MSBuild.Sdk.Extras/1.2.2">
    <!-- Project properties -->
    <PropertyGroup>
        <TargetFrameworks>net47;net46;net45;net40</TargetFrameworks>
        <AppendTargetFrameworkToOutputPath>true</AppendTargetFrameworkToOutputPath>
        <AssemblyName>MahApps.Metro</AssemblyName>
        <RootNamespace>MahApps.Metro</RootNamespace>
        <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
        <GenerateDocumentationFile>true</GenerateDocumentationFile>
    </PropertyGroup>

    <ItemGroup>
        <Reference Include="System.ComponentModel.DataAnnotations" />
        <Reference Include="System.Configuration" />
    </ItemGroup>

    <PropertyGroup Condition=" '$(TargetFramework)' == 'net40' ">
        <DefineConstants>NET40;NET4</DefineConstants>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(TargetFramework)' == 'net45' ">
        <DefineConstants>NET45;NET4_5</DefineConstants>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(TargetFramework)' == 'net46' ">
        <DefineConstants>NET46;NET4_5</DefineConstants>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(TargetFramework)' == 'net47' ">
        <DefineConstants>NET47;NET4_5</DefineConstants>
    </PropertyGroup>

    <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
        <DebugType>full</DebugType>
        <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
        <NoWarn>1591</NoWarn>
        <DebugType>pdbonly</DebugType>
        <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    </PropertyGroup>

    <ItemGroup>
        <ProjectCapability Include="DynamicDependentFile" />
        <ProjectCapability Include="WindowsXaml;WindowsXamlPage;WindowsXamlCodeBehind;WindowsXamlResourceDictionary;WindowsXamlUserControl" />
    </ItemGroup>

    <!-- Items include -->
    <ItemGroup>
        <None Include="paket.references" />
        <Compile Remove="$(BaseIntermediateOutputPath)\**" />
        <UpToDateCheckInput Include="**\*.xaml" />
    </ItemGroup>

    <!-- Workaround to fix Intellisense file generation for XAML projects https://github.com/dotnet/project-system/issues/2488 -->
    <Target Name="WorkaroundForXAMLIntellisenseBuildIssue" AfterTargets="_CheckCompileDesignTimePrerequisite">
        <PropertyGroup>
            <BuildingProject>false</BuildingProject>
        </PropertyGroup>
    </Target>

    <Import Project="..\.paket\Paket.Restore.targets" />
</Project>