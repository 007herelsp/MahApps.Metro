<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="Microsoft.NET.Sdk">
    <PropertyGroup>
        <!-- workaround for https://github.com/NuGet/Home/issues/5894 -->
        <OriginalProjectName>MahApps.Metro</OriginalProjectName>
    </PropertyGroup>
    <!-- Project properties -->
    <PropertyGroup>
        <TargetFrameworks>net47;net46;net45;net40</TargetFrameworks>
        <AppendTargetFrameworkToOutputPath>true</AppendTargetFrameworkToOutputPath>
        <AssemblyName>MahApps.Metro</AssemblyName>
        <RootNamespace>MahApps.Metro</RootNamespace>
        <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
        <GenerateDocumentationFile>true</GenerateDocumentationFile>
    </PropertyGroup>
    <PropertyGroup>
        <!-- you can disable (set false) these two properties if you don't want to use default VS behavior for adding your files -->
        <EnableDefaultNoneItems>false</EnableDefaultNoneItems>
        <EnableDefaultItems>false</EnableDefaultItems>
        <EnableDefaultCompileItems>false</EnableDefaultCompileItems>
    </PropertyGroup>

    <ItemGroup>
        <Reference Include="System.ComponentModel.DataAnnotations" />
        <Reference Include="System.Configuration" />
    </ItemGroup>

    <PropertyGroup Condition=" '$(TargetFramework)' == 'net40' ">
        <DefineConstants>NET40;NET4</DefineConstants>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(TargetFramework)' == 'net45' ">
        <DefineConstants>NET45;NET4_5</DefineConstants>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(TargetFramework)' == 'net46' ">
        <DefineConstants>NET46;NET4_5</DefineConstants>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(TargetFramework)' == 'net47' ">
        <DefineConstants>NET47;NET4_5</DefineConstants>
    </PropertyGroup>

    <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
        <DebugType>full</DebugType>
        <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
        <DebugType>pdbonly</DebugType>
        <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    </PropertyGroup>

    <ItemGroup>
        <ProjectCapability Include="DynamicDependentFile" />
        <ProjectCapability Include="WindowsXaml;WindowsXamlPage;WindowsXamlCodeBehind;WindowsXamlResourceDictionary;WindowsXamlUserControl" />
    </ItemGroup>

    <!-- Items include -->
    <ItemGroup>
        <None Include="paket.references" />
        <Compile Remove="$(BaseIntermediateOutputPath)\**" />
        <Compile Include="**\*.cs" Exclude="$(BaseIntermediateOutputPath)\**" />
        <Page Include="**\*.xaml" SubType="Designer" Generator="MSBuild:Compile" Exclude="$(BaseIntermediateOutputPath)\**" />
        <Compile Update="**\*.xaml.cs" SubType="Code" DependentUpon="%(Filename)" />
        <UpToDateCheckInput Include="**\*.xaml" Exclude="$(BaseIntermediateOutputPath)\**" />
    </ItemGroup>

    <!-- Workaround to fix Intellisense file generation for XAML projects https://github.com/dotnet/project-system/issues/2488 -->
    <Target Name="WorkaroundForXAMLIntellisenseBuildIssue" AfterTargets="_CheckCompileDesignTimePrerequisite">
        <PropertyGroup>
            <BuildingProject>false</BuildingProject>
        </PropertyGroup>
    </Target>

    <!-- workaround for issue #4 from https://github.com/dotnet/sdk/issues/810#issuecomment-295642279 -->
    <PropertyGroup>
        <LanguageTargets>$(MSBuildToolsPath)\Microsoft.CSharp.targets</LanguageTargets>
    </PropertyGroup>

    <Import Project="$(MSBuildSDKExtrasTargets)" Condition="Exists('$(MSBuildSDKExtrasTargets)')" />
    <Import Project="..\.paket\Paket.Restore.targets" />
</Project>